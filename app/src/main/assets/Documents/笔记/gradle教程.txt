gradleæ•™ç¨‹
http://www.groovy-lang.org/style-guide.html#_omitting_parentheses

ç¬¬ä¸€ç«  groovy åŸºç¡€å®šä¹‰
ç¬¬äºŒç«  projects ä¸ tasks
ç¬¬ä¸‰ç«  gradle æ„å»ºä¸å‘½ä»¤
ç¬¬å››ç«  gradle ä¾èµ–é…ç½®
ç¬¬äº”ç«  Android çš„ gradle é…ç½®
ç¬¬å…­ç«  gradle æ–‡ä»¶ï¼ŒåŸºäº Project å¯¹è±¡å†…çš„æ–¹æ³•
ç¬¬ä¸ƒç«  gradle.properties å±æ€§é…ç½®
ç¬¬å…«ç«  gradle è°ƒç”¨ Ant
ç¬¬ä¹ç«  gradle æ³¨æ„äº‹é¡¹

ç¬¬ä¸€ç«  groovy åŸºç¡€å®šä¹‰
groovy ä¸‹è½½åœ°å€ï¼šhttps://groovy.apache.org/download.html
groovy ä¸­åŸºæœ¬æ•°æ®ç±»å‹éƒ½æ˜¯ä»¥å¯¹è±¡çš„å½¢å¼å­˜åœ¨ã€‚
groovy ä¸­æ‰€æœ‰çš„ç±»å‹éƒ½æ˜¯ public çš„ã€‚
æ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿è‡ª GroovyObjectã€‚
trait ç±»ä¼¼äº abstractï¼Œä½†ç»§æ‰¿ä½¿ç”¨ implements

00.ç‰¹æ€§è¯´æ˜
1ï¼‰åŸºäºå£°æ˜å’Œçº¦å®šçš„æ„å»º
2ï¼‰ä¸ºä»¥ä¾èµ–ä¸ºåŸºç¡€çš„ç¼–ç¨‹æ–¹å¼æä¾›è¯­è¨€æ”¯æŒ
3ï¼‰æ„å»ºç»“æ„åŒ–
4ï¼‰å¤šç§æ–¹å¼ç®¡ç†ä¾èµ–
5ï¼‰æ˜¯ä¸€ä¸ªæ„å»ºé›†æˆå·¥å…·
6ï¼‰æ˜“äºç§»æ¤
7ï¼‰è‡ªç”±å’Œå¼€æºï¼šgradleæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå¹¶éµå¾ªASL è®¸å¯

01.å˜é‡ä¸å­—ç¬¦ä¸²
1ï¼‰å¼ºç±»å‹å®šä¹‰ï¼Œå¯¹åº”çš„å°±æ˜¯ Java çš„æ•°æ®ç±»å‹
int variable =1
boolean variable =false

2ï¼‰å¼±ç±»å‹å®šä¹‰ï¼Œä½¿ç”¨ def ä¿®é¥°ï¼Œå¿…é¡»æœ‰åˆå§‹å€¼ï¼Œå¦åˆ™ä¼šæŠ› NullPointException å¼‚å¸¸
def ä¿®é¥°çš„å˜é‡ï¼Œå˜é‡çš„ç±»å‹æ˜¯å¯ä»¥éšæ„è½¬æ¢çš„
def variable =1
def variable = true
å°æ•°çš„ç±»å‹æ˜¯BigDecimal

def ä¿®é¥°ï¼Œå¼•ç”¨æ–¹æ³•æ—¶æœ‰æ—¶ä¼šæ²¡æœ‰æç¤ºã€‚

3ï¼‰å­—ç¬¦ä¸²
String variable ="å­—ç¬¦ä¸²"
def variable ="å­—ç¬¦ä¸²"

02.å¼•å·é—®é¢˜
1ï¼‰å•å¼•å·ä¸­çš„å†…å®¹éµå¾ªJavaçš„ Stringï¼Œæ”¯æŒæ¢è¡Œç¬¦ï¼Œä½†ä¸æ”¯æŒ$ç¬¦å·è½¬ä¹‰ï¼Œ
2ï¼‰åŒå¼•å·åœ¨å•å¼•å·çš„åŸºç¡€ä¸Šæ”¯æŒ$è½¬ä¹‰çš„è¡¨è¾¾å¼ã€‚
3ï¼‰ä¸‰å¼•å·åœ¨å•å¼•å·çš„åŸºç¡€ä¸Šæ”¯æŒéšæ„æ¢è¡Œï¼Œæ”¯æŒ ' " ç­‰ç‰¹æ®Šå­—ç¬¦çš„ç›´æ¥æ˜¾ç¤ºã€‚

03.String å¸¸ç”¨çš„ API
def a = "hello"
def b = "Hello"
def c = "lo"
println a>b
println a[1..2]
println a.minus(c)
println a.reverse()//é€†åº
println a.capitalize()//é¦–å­—æ¯å¤§å†™
println a.isEmpty()//æ˜¯å¦æœ‰æ•°å­—æˆ–å­—ç¬¦

04.å‡½æ•°å®šä¹‰ ä¸ Java å‡½æ•°ç±»ä¼¼ï¼Œå‚æ•°å¯ä»¥ä¸æŒ‡å®šç±»å‹
void/def/String test(a,b){ }
void/def/String test(int a,int b){ }

1ï¼‰voidï¼šæ— è¿”å›å€¼
2ï¼‰defï¼šå¯ä»¥è¿”å›ä»»æ„ç±»å‹ï¼Œæœ€åä¸€è¡Œä»£ç çš„ç»“æœå°±æ˜¯è¿”å›å€¼ï¼Œä¸ kotlin ç›¸ä¼¼
3ï¼‰Stringï¼šè¿”å›æŒ‡å®šçš„ç±»å‹ã€‚

05.é—­åŒ…çš„å®šä¹‰ä¸ä½¿ç”¨
åŒ¿åå†…è”å‡½æ•°ï¼Œç§°ä¸ºé—­åŒ…ã€‚
æœ¬è´¨ä¸Šï¼Œé—­åŒ…æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–éƒ¨è¿æ¥èµ·æ¥çš„æ¡¥æ¢ã€‚
é—­åŒ…ï¼ˆclosureï¼‰ç­‰åŒäº Java çš„ Consumerï¼Œè¿‘ä¼¼äº lambda è¡¨è¾¾å¼
æ ¼å¼æ˜¯ ï¼š
def xxx= { paramters -> code }
def xxx= { println it } é»˜è®¤æœ‰ä¸€ä¸ªå‚æ•°
def xxx= { -> println it } æ— å‚æ•°

æœ€åä¸€è¡Œä»£ç å°±æ˜¯è¿”å›å€¼ã€‚
def closure = { String str, int value -> println "str=$str,value=$value" }
def closure2 = { str, value -> println "str=$str,value=$value" }
def closure3 = { println "str=$it" }

è°ƒç”¨æ–¹å¼
1)closure("dsfdl", 3333)
2)closure2.call("dsfdl", "shdkjf")

æ— å‚æ•°æ—¶ï¼Œå•ç‹¬æ‰§è¡Œ closure3 è¾“å‡ºçš„æ˜¯è¿™ä¸ªå˜é‡ã€‚
è¦æ‰§è¡Œå¿…é¡»åŠ æ‹¬å· closure3() è¿™æ ·æ‰ä¼šæ‰§è¡Œã€‚

06.é—­åŒ…åšä¸ºå‡½æ•°çš„å‚æ•°æ—¶ï¼Œå¿…é¡»ä¸Šä¸‹æ–‡å¯¹åº”ï¼Œä¸å¯¹åº”ä¼šæŠ¥é”™ã€‚ï¼ˆç®€å•æ˜¯ç®€å•ï¼Œä½†çœ‹èµ·ä»£ç æ¥å¾ˆæ‡µé€¼å•Šï¼‰
é—­åŒ…åªä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°å‡ºç°ï¼›
def testClosure(closure) {
    closure()
}

def testClosure(a1, closure) {
    closure("äºŒä¸ªå‚æ•°") //è°ƒç”¨é—­åŒ…
}

def testClosure(a1, b1, closure) {
    closure(66) //è°ƒç”¨é—­åŒ…
}

1ï¼‰åªæœ‰ä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°æ—¶ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™å¯ä»¥çœç•¥åœ†åœˆæ‹¬å·ã€‚å¦‚ï¼š
testClosure {
    println "closure çœç•¥åœ†æ‹¬å·ï¼Œé»˜è®¤å‚æ•°æ˜¯$it"
}

2ï¼‰æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œé—­åŒ…å¦‚ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ï¼Œé—­åŒ…çš„å¤§æ‹¬å·å¯ä»¥åœ¨åœ†æ‹¬å·é‡Œï¼Œä¹Ÿå¯ä»¥åœ¨å¤–è¾¹
testClosure("test") {
    println "closure åœ¨å¤–éƒ¨ï¼Œé»˜è®¤å‚æ•°æ˜¯$it"
}
testClosure(4, "test", {
    println "closure åœ¨å†…éƒ¨ï¼Œé»˜è®¤å‚æ•°æ˜¯$it"
})
testClosure("fff", "test", {
    println "closure åœ¨å†…éƒ¨ï¼Œé»˜è®¤å‚æ•°æ˜¯$it"
})

3ï¼‰doLast { println "dolast" }
ç­‰åŒäº
doLast( { println "dolast" } ï¼‰

07.String å¸¸ç”¨çš„é—­åŒ…æ–¹æ³•ï¼š
1ï¼‰eachï¼šéå†
2ï¼‰multiply()ï¼šå¤åˆ¶
3ï¼‰find{}ï¼šæŸ¥æ‰¾ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å­—ç¬¦
4ï¼‰findAll{}ï¼šè¿”å›æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦é›†åˆ
5ï¼‰any{}ï¼šæ˜¯å¦æœ‰ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦
6ï¼‰every{}ï¼šæ˜¯å¦æ‰€æœ‰å­—ç¬¦éƒ½ç¬¦åˆæ¡ä»¶
7ï¼‰collection{}ï¼šå­—ç¬¦è½¬é›†åˆ
8ï¼‰count{}ï¼šç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„æ•°é‡

08.é—­åŒ…çš„ä¸‰ä¸ªé‡è¦å˜é‡
1ï¼‰thisï¼šä»£è¡¨é—­åŒ…å®šä¹‰çš„ç±»ï¼Œæœ€å¤–å±‚çš„ç±»ã€‚
2ï¼‰ownerï¼šä»£è¡¨é—­åŒ…å®šä¹‰å¤„çš„ç±»æˆ–è€…å¯¹è±¡ã€‚ä»£è¡¨å½“å‰å˜é‡æ‰€å¤„ä½ç½®çš„ç±»ã€‚
3ï¼‰delegateï¼šä»£è¡¨ä»»æ„å¯¹è±¡ï¼Œdelegate é»˜è®¤ä¸º owner æŒ‡å‘çš„å¯¹è±¡ã€‚å¯æ‰‹åŠ¨æ›´æ”¹ã€‚

09.å®¹å™¨ç±»
1ï¼‰Listï¼šé“¾è¡¨ï¼Œåº•å±‚å¯¹åº”Javaçš„Listæ¥å£ï¼Œä¸€èˆ¬ç”¨ArrayListä½œä¸ºçœŸæ­£çš„å®ç°ç±»ã€‚
def list = [1,2,3,4]
è·å– list[2]
æ·»åŠ  list.add(6)
 list<<6
 list+6

ç§»é™¤
 list-6
 list-[6,8]

ä¸ä¼šäº§ç”Ÿæ•°ç»„ä¸‹æ ‡è¶Šç•Œçš„é”™è¯¯ã€‚
æ·»åŠ æ•°æ®æ—¶ï¼Œä¸‹æ ‡è¶Šç•Œï¼Œå€¼è‡ªåŠ¨å­˜å…¥ï¼Œæ•°ç»„é•¿åº¦è‡ªåŠ¨å˜æ›´åˆ°å½“å‰é•¿åº¦ï¼Œä¸­é—´è¶Šè¿‡çš„å…ƒç´ ä¸ºç©ºï¼›
è·å–æ•°æ®æ—¶ï¼Œä¸‹æ ‡è¶Šç•Œï¼Œè·å¾—çš„å€¼ä¸º nullï¼Œä¸ä¼šæŠ¥é”™ï¼›

2ï¼‰Mapï¼šé”®å€¼è¡¨ï¼Œåº•å±‚å¯¹åº”Java çš„ LinkedHashMap
def map=['key':'value','key2':true,key3:33,(key4):44]
ç”¨[]å®šä¹‰mapçš„æ—¶å€™ key å¯ä»¥ä¸ç”¨åŠ å•å¼•å·æˆ–è€…åŒå¼•å·ï¼›
ä¸åŠ å¼•å·ä¸è‡ªå®šä¹‰å±æ€§åŒåæ—¶ï¼Œè¦æ˜¯æƒ³ç”¨è‡ªå®šä¹‰å±æ€§çš„å€¼ï¼Œéœ€è¦åŠ æ‹¬å·ï¼›
é€šè¿‡ [] è°ƒç”¨çš„æ—¶å€™éœ€è¦åŠ å¼•å·ã€‚
è·å–å€¼ï¼š
map['key']
map[key]
map.key
è®¾ç½®å€¼ï¼š
map['key'] = 77
map.key = 99

3ï¼‰Rangeï¼šèŒƒå›´ï¼Œæ˜¯å¯¹Listçš„ä¸€ç§æ‰©å±•ï¼Œç±»ä¼¼äº kotlin çš„èŒƒå›´è®¾å®š
def range = 1..9
def range1 = 1..<9 ä¸å«æœ€åä¸€ä¸ªæ•°
è·å–æ•°å€¼æ—¶ï¼Œä¸ä¼šäº§ç”Ÿæ•°æ®ä¸‹æ ‡è¶Šç•Œçš„é—®é¢˜ï¼Œå€¼ä¸º nullã€‚
æ·»åŠ æ•°æ®æ—¶ï¼Œä¸‹æ ‡ä¸å¯ä»¥è¶Šç•Œã€‚

è·å–æ•°å€¼ï¼š
range[1]
range.fromï¼šèµ·ç‚¹
range.toï¼šç»ˆç‚¹
range.step(2) éš”ï¼ˆ2-1ï¼‰ä¸ªè·å–ï¼Œç±»ä¼¼äº kotlin
range.contains(1)

10.å¤šä¸ªç±»éƒ½ç›¸åŒçš„æ–¹æ³•åã€‚
1ï¼‰eachï¼šéå†
2ï¼‰find{}ï¼šæŸ¥æ‰¾ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å­—ç¬¦
3ï¼‰findAll{}ï¼šè¿”å›æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦é›†åˆ
4ï¼‰any{}ï¼šæ˜¯å¦æœ‰ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦
5ï¼‰every{}ï¼šæ˜¯å¦æ‰€æœ‰å­—ç¬¦éƒ½ç¬¦åˆæ¡ä»¶
6ï¼‰collection{}ï¼šå­—ç¬¦è½¬é›†åˆ
7ï¼‰count{}ï¼šç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„æ•°é‡
8ï¼‰groupBy{}ï¼š åˆ†ç»„

11.JSONè§£æ
1ï¼‰å¯¹è±¡è½¬å­—ç¬¦ä¸² JsonOutput
toJson()
prettyPrint("")//æ ¼å¼åŒ–
2ï¼‰å­—ç¬¦ä¸²è½¬å¯¹è±¡
new JsonSlurper().parse("".getBytes())

12.XML
1ï¼‰è¯»å–XMLæ–‡ä»¶
def xmlSluper = new XmlSlurper()
def result = xmlSluper.parseText(xml)
println result.@package
println result.test.text()

//result.declareNamespace('android': 'http://schemas.android.com/apk/res/android')
println result.application.@'android:name'
println result.application.activity.@'android:name'
println result.application.activity[0].@'android:name'

result.application.activity.each{
    println it.@'android:name'
}
2ï¼‰ç”ŸæˆXMLæ–‡ä»¶
def xmlOut = new StringWriter()
def xmlBuilder = new MarkupBuilder(xmlOut)
xmlBuilder.html(){
    title(id:123,'name':'android','xmlç”Ÿæˆ'){
        person()
    }
    body('name':'java'){
        activity(id: 001,class:'MainActivity','å…·ä½“å†…å®¹')
        activity(id: '002',class:'Main2Activity','å…·ä½“å†…å®¹2')
    }
}
println xmlOut

13.Fileçš„æ–¹æ³•
1ï¼‰def file = new File("$rootDir/build.gradle")
file.eachLine { line ->
    println line
}
println file.bytes
println file.text
println file.readLines()
println file.readLines().toListString()

println file.withReader {
    def buffer = new char[100]
    it.read(buffer)
    buffer
}
file.withWriter {writer->writer.write("")}

2ï¼‰æ–‡ä»¶æµ
def src = new File("$rootDir/build.gradle")
def target = new File("$rootDir/build/å¤åˆ¶æ–‡ä»¶.txt")
if (!target.exists()) {
    target.createNewFile()
    println "åˆ›å»ºæ–‡ä»¶"
}
target.withOutputStream { os ->
    src.withInputStream { is ->
        os << is //æŠŠæ•°æ®ä»is è¾“å‡ºåˆ° os ä¸­ã€‚ï¼ˆçœŸæ‡µé€¼ï¼‰
    }
}

14.os << isï¼š<<æ˜¯é‡è½½ç¬¦ï¼ŒæŠŠæ•°æ®ä»isè¾“å‡ºåˆ°osã€‚ï¼ˆä»–å¦ˆçš„ä½ å€’æ˜¯åè¿‡æ¥å•Šï¼‰
<< ï¼šè¡¨ç¤ºæŠŠå³è¾¹çš„æ•°æ®æ·»åŠ åˆ°å·¦ä¾§ä¸­ã€‚



ç¬¬äºŒç«  projects ä¸ tasks
1ï¼‰Groovy å…¼å®¹ Java è¯­æ³•ï¼Œæœ€ç»ˆè¿˜æ˜¯ä¼šè½¬æˆJavaä»£ç è¿è¡Œåœ¨JVM ä¸Šçš„ï¼›
å¯ä»¥åœ¨ task ä¸­è°ƒç”¨ Groovy æˆ– Java çš„æ–¹æ³•æ¥å®Œæˆæ“ä½œã€‚

2ï¼‰description å‚æ•°projectï¼Œmodelï¼Œtaskï¼Œéƒ½å¯ä»¥è®¾ç½®ã€‚

3ï¼‰æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œå¯ä»¥çœç•¥åœ†æ‹¬å·ï¼Œæ— å‚æ•°ä¸èƒ½çœç•¥åœ†æ‹¬å·ï¼ˆä¸ªäººè§‰å¾—çº¯å±å¤šä½™ï¼‰
println("abc")
println "abc"

01. task
task clean(type:Delete)ï¼šç›¸å½“äºæ˜¯ Delete ç±»çš„æ´¾ç”Ÿä»»åŠ¡ï¼Œå…¶å®å°±æ˜¯å†…éƒ¨ä»»åŠ¡è¡ç”Ÿ
å®šä¹‰é»˜è®¤ä»»åŠ¡ defaultTasks 'a','hello','checkFile' å¿…é¡»è¦åŠ å¼•å·

åˆ›å»ºä»»åŠ¡çš„æ–¹å¼ï¼š
1)
task hello{}
task(hello){}
task('hello'){}
tasks.create(name:'hello'){}
2)
task copy(type:Copy)
task(copy,type:Copy)
tasks.create(name:copy,type:Copy)

3)
project.task("copyFile6")
project.task("copyFile6",type:Copy)

4)tasks.create("task6")

02.ä»»åŠ¡ä¸­æ’å…¥ä»»åŠ¡
dofirstï¼šé˜Ÿå¤´æ’å…¥ï¼Œè°æœ€åæ’å…¥ï¼Œè°å°±å…ˆæ‰§è¡Œã€‚
dolastï¼šé˜Ÿå°¾æ’å…¥ï¼Œæœ€åå°±æ˜¯æœ€åã€‚

è°ƒç”¨æ–¹å¼
1ï¼‰ï¼šä»»åŠ¡å†…ç›´æ¥ä½¿ç”¨
task lastTest{
doLast{ }
doFirst{ }
}
2ï¼‰ï¼šä»»åŠ¡å·²å­˜åœ¨ï¼Œé€šè¿‡ . è°ƒç”¨
lastTest.doLast{}
lastTest.doFirst{}

03.ä»»åŠ¡ä¾èµ– dependsOn
a.dependsOn('b') {  ä»»åŠ¡aä¾èµ–bã€‚
    dolast{
        println "ä¾èµ–bçš„åŒæ—¶å†æ¬¡åœ¨é˜Ÿå°¾æ’å…¥ä¸€ä¸ªä»»åŠ¡"
    }
}
è°ƒç”¨æ–¹å¼
1ï¼‰task count(dependsOn: upper) {}
task count(dependsOn: [upper,task2]) {}
2ï¼‰task1.dependsOn(task2, task3)
3ï¼‰count.dependsOn('delay')
4ï¼‰ä»»åŠ¡å†…ä½¿ç”¨ depensOn task1

ä»»åŠ¡é¡ºåºæŒ‰ä»£ç é¡ºåº;
ä¾èµ–ä»»åŠ¡åœ¨å‰é¢å·²ç»å£°æ˜ï¼Œå¯ä»¥ä¸å¸¦å¼•å·ï¼›
åœ¨ä¹‹åæ‰å£°æ˜ï¼Œéœ€è¦å¸¦å¼•å·ï¼›
åŠ¨æ€ä»»åŠ¡éµå¾ªæ­¤è§„åˆ™ã€‚

04.åŠ¨æ€ä»»åŠ¡ï¼štimesï¼›éµå¾ªä»£ç é¡ºåºçš„å¼•ç”¨è§„åˆ™ã€‚
4.times { count ->
    task "task$count" {//åˆ›å»ºä»»åŠ¡
        doLast {
            println "åŠ¨æ€ä»»åŠ¡$count"
        }
    }
}

05.ä»»åŠ¡å†…è‡ªå®šä¹‰å±æ€§ï¼Œåªåœ¨ä»»åŠ¡å†…ä½¿ç”¨ï¼Œç›´æ¥ä½¿ç”¨ def/String å®šä¹‰ã€‚
1ï¼‰éœ€è¦åœ¨å…¶ä»–ä»»åŠ¡å†…ä½¿ç”¨ï¼Œç”¨ ext.custom  å®šä¹‰ã€‚
2ï¼‰gradle.properties ä¸ build.gradleçš„ext å†…å®šä¹‰çš„å±æ€§å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œgradle.propertiesçš„ä¼˜å…ˆçº§é«˜ã€‚
3ï¼‰ä¸èƒ½åœ¨ doLast å’Œ doFirst ä¸­å®šä¹‰ï¼Œå¤–éƒ¨ä»»åŠ¡é»˜è®¤ä¼šåŠ è½½ï¼ŒdoLast ä¸ doFirst ä¸­æ˜¯æ‰§è¡Œæ­¤ä»»åŠ¡åæ‰ä¼šåŠ è½½ã€‚

06.ä»»åŠ¡ä¾èµ–ï¼ŒåŠ¨æ€ä¿®æ”¹ version ,status ç­‰å­—æ®µçš„å±æ€§ã€‚åªé€‚ç”¨äºå½“å‰gradleæ–‡ä»¶
//æ‰€æœ‰ä»»åŠ¡çš„ä¸åŒè¾“å‡ºï¼Œæ¯æ¬¡æ‰§è¡Œä»»åŠ¡éƒ½ä¼šæ‰§è¡Œä»¥ä¸‹æ–¹æ³•
gradle.taskGraph.whenReady {
    taskGraph ->
        if (taskGraph.hasTask(b)) {
            version = "åŠ¨æ€æ›´æ”¹å­—æ®µå±æ€§ã€versionã€‘"
            status = "åŠ¨æ€æ›´æ”¹å­—æ®µå±æ€§ã€statusã€‘"
        } else {
            version = "åŠ¨æ€æ›´æ”¹å­—æ®µå±æ€§ã€versionã€‘ä»»åŠ¡åç§°==${taskGraph.allTasks[0]}"
            status = "åŠ¨æ€æ›´æ”¹å­—æ®µå±æ€§ã€statusã€‘ä»»åŠ¡åç§°==${taskGraph.allTasks[0]}"
        }
        println "version==$version"
        println "status==$status"
}

07.ä»»åŠ¡æ’åº
task1.mustRunArter(task2)ï¼štask1å¿…é¡»åœ¨ task2 åæ‰§è¡Œ
task1.shouldRunArter(task2)ï¼štask1 åº”è¯¥åœ¨ task2 åæ‰§è¡Œã€‚

1ï¼‰ä¸€èµ·æ‰§è¡Œæ—¶æ‰ä¼šæœ‰æ•ˆæœï¼Œå•ç‹¬æ‰§è¡Œæ—¶æ²¡é™åˆ¶ã€‚
2ï¼‰ä¸€èµ·æ‰§è¡Œæ—¶ï¼Œå¦‚æœæœ‰ --continue å‘½ä»¤ï¼Œtask2æ‰§è¡Œå¤±è´¥ï¼Œtask1 ä¹Ÿä¼šæ‰§è¡Œã€‚
3ï¼‰ä¾èµ–å½¢æˆå¾ªç¯åï¼ŒåŒæ ·ä¼šå¤±æ•ˆ

08.ä»»åŠ¡è·³è¿‡ï¼š
1ï¼‰onlyIf{}ï¼šä¸ºçœŸæ—¶ä»»åŠ¡æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚
   task1.onlyIf{ true }ï¼šä¸º true æ‰ä¼šæ‰§è¡Œä»»åŠ¡ task1
2ï¼‰æŠ›å‡ºå¼‚å¸¸ StopExecutionExceptionï¼Œå¤šä»»åŠ¡ä¾èµ–æ—¶ï¼Œå¯ç”¨åˆ°ã€‚
æŠ›å‡ºæ­¤å¼‚å¸¸åï¼Œæ­¤ä»»åŠ¡ä¼šä¸­æ–­ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡

09.ä»»åŠ¡è¦†ç›–ï¼šoverwrite:trueï¼šé‡å†™ç°æœ‰çš„ä»»åŠ¡
task clean(overwrite:true)ï¼šcleanä»»åŠ¡ä¼šè¢«è¦†ç›–ï¼Œè²Œä¼¼å·²è¢«åºŸå¼ƒã€‚

10.enableï¼šä»»åŠ¡çš„å¯ç”¨ä¸ç¦ç”¨
task1.enable = false/true ç¦ç”¨/å¯ç”¨

11.ä»»åŠ¡æ˜¯å¦æ”¹å˜
inputs.file srcFileï¼šæºæ–‡ä»¶
outputs.dir destDirï¼šç›®æ ‡ç›®å½•
ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼š1 actionable task: 1 executed
ç¬¬äºŒæ¬¡æ–‡ä»¶æœªå˜ï¼Œæ‰§è¡Œåï¼š1 actionable task: 1 up-to-date

ä»»åŠ¡inputs å±æ€§æ—¶TaskInputsç±»å‹ï¼Œä»»åŠ¡ outPuts å±æ€§æ—¶ TaskOutputs ç±»å‹ã€‚
å¦‚ä½•å®ç°ï¼š
åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œä»»åŠ¡ä¹‹å‰ï¼ŒGradle å¯¹è¾“å…¥è¿›è¡Œä¸€æ¬¡å¿«ç…§ã€‚è¿™ä¸ªå¿«ç…§åŒ…å«äº†è¾“å…¥æ–‡ä»¶é›†å’Œæ¯ä¸ªæ–‡ä»¶çš„å†…å®¹çš„å“ˆå¸Œå€¼ã€‚ç„¶å Gradle æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚å¦‚æœä»»åŠ¡æˆåŠŸå®Œæˆï¼ŒGradle å°†å¯¹è¾“å‡ºè¿›è¡Œä¸€æ¬¡å¿«ç…§ã€‚è¯¥å¿«ç…§åŒ…å«è¾“å‡ºæ–‡ä»¶é›†å’Œæ¯ä¸ªæ–‡ä»¶çš„å†…å®¹çš„å“ˆå¸Œå€¼ã€‚Gradle ä¼šä¿å­˜è¿™ä¸¤ä¸ªå¿«ç…§ï¼Œç›´åˆ°ä»»åŠ¡çš„ä¸‹ä¸€æ¬¡æ‰§è¡Œã€‚
ä¹‹åæ¯ä¸€æ¬¡ï¼Œåœ¨æ‰§è¡Œä»»åŠ¡ä¹‹å‰ï¼ŒGradle ä¼šå¯¹è¾“å…¥å’Œè¾“å‡ºè¿›è¡Œä¸€æ¬¡æ–°çš„å¿«ç…§ã€‚å¦‚æœæ–°çš„å¿«ç…§å’Œå‰ä¸€æ¬¡çš„å¿«ç…§ä¸€æ ·ï¼ŒGradle ä¼šå‡å®šè¿™äº›è¾“å‡ºæ˜¯æœ€æ–°çŠ¶æ€çš„å¹¶è·³è¿‡è¯¥ä»»åŠ¡ã€‚å¦‚æœå®ƒä»¬ä¸ä¸€åˆ™ï¼Œ Gradle åˆ™ä¼šæ‰§è¡Œè¯¥ä»»åŠ¡ã€‚Gradle ä¼šä¿å­˜è¿™ä¸¤ä¸ªå¿«ç…§ï¼Œç›´åˆ°ä»»åŠ¡çš„ä¸‹ä¸€æ¬¡æ‰§è¡Œã€‚

12.å®šä¹‰ç‰¹å®šåç§°è§„åˆ™çš„ä»»åŠ¡
tasks.addRule('pattern:ping<ID>') { taskName ->
    if (taskName.startsWith("ping")) {
        task(taskName) {
            println "pinging:" + taskName
            println "pinging:" + (taskName - 'ping')
        }
    }
}
éƒ¨åˆ†åŒåä»»åŠ¡çš„è”åŠ¨ä¾èµ–
task groupPing {
    dependsOn pingServer1, pingServer2
}

13.ææ„å™¨ä»»åŠ¡ finalizedBy ï¼Œæ›´åº”è¯¥è§£é‡Šä¸ºæŠŠæŸä»»åŠ¡åŠ åœ¨æ­¤ä»»åŠ¡ä¹‹åæ‰§è¡Œï¼Œå³ä½¿å¤±è´¥ä¹Ÿæ‰§è¡Œã€‚
task1.finalizeBy task2ï¼šæ— è®º task1 æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼Œtask2éƒ½ä¼šæ‰§è¡Œã€‚

14.å¤–éƒ¨è„šæœ¬é…ç½®
task outGradleConfigure {
    doLast {
        def pos = configure(new java.text.FieldPosition(10)){
            beginIndex=8
            endIndex=19
        }
        // Apply the script
//        apply from: 'other.gradle', to: pos
        println pos.beginIndex
        println pos.endIndex
    }
}
æ–‡ä»¶ other.gradle é…ç½®
beginIndex=8
endIndex=19

15.Project ç±»å¸¸ç”¨çš„å±æ€§
01ï¼‰å±æ€§ï¼šproject.name ï¼šString 	é¡¹ç›®çš„åç§°ã€‚
02ï¼‰å±æ€§ï¼šproject.path ï¼šString 	é¡¹ç›®å†…å¼•ç”¨é¡¹ç›®çš„å†™æ³•
03ï¼‰å±æ€§ï¼šproject.description ï¼šString 	é¡¹ç›®çš„æè¿°ã€‚
04ï¼‰å±æ€§ï¼šproject.rootDir ï¼šFile 	æ•´ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ã€‚
05ï¼‰å±æ€§ï¼šproject.projectDir ï¼šFile 	è‡ªå·±çš„æ ¹ç›®å½•ã€‚
06ï¼‰å±æ€§ï¼šproject.buildDir ï¼šFile 	è‡ªå·±çš„ç¼“å­˜ç›®å½•
07ï¼‰å±æ€§ï¼šproject.buildFile ï¼šè‡ªå·±çš„ gradle é…ç½®æ–‡ä»¶
08ï¼‰å±æ€§ï¼šproject.parent ï¼šçˆ¶çº§é¡¹ç›®
09ï¼‰å±æ€§ï¼šproject.group ï¼šObject 	æ‰€å± group åˆ’åˆ†
10ï¼‰å±æ€§ï¼šproject.version ï¼šObject 	å¯åŠ¨æ€æŒ‡å®š
11ï¼‰å±æ€§ï¼šproject.status ï¼šObject 	å¯åŠ¨æ€æŒ‡å®š

16.Gradle ç±»å¸¸ç”¨çš„å±æ€§
01ï¼‰å±æ€§ï¼šgradle.gradleVersion ï¼š ç‰ˆæœ¬å·
02ï¼‰å±æ€§ï¼šgradle.gradleHomeDir ï¼š å½“å‰ä½¿ç”¨ç‰ˆæœ¬ gradle çš„å…·ä½“è·¯å¾„
03ï¼‰å±æ€§ï¼šgradle.gradleUserHomeDir ï¼š gradleä»“åº“çš„è·¯å¾„
04ï¼‰å±æ€§ï¼šgradle.rootProject ï¼š æ ¹é¡¹ç›®
05ï¼‰å±æ€§ï¼šgradle.parent ï¼š
06ï¼‰å±æ€§ï¼šgradle.gradle ï¼š


ç¬¬ä¸‰ç«  gradle æ„å»ºä¸å‘½ä»¤
ä»»åŠ¡åå¯ç®€åŒ–ï¼Œå¯ä»¥å†™ä¸€åŠï¼Œå¯é©¼å³°ç¼©å†™æ‰§è¡Œï¼›åŒæ—¶æ‰§è¡Œä¸¤ä¸ªä»»åŠ¡ï¼Œç©ºæ ¼éš”å¼€

01.gradle initï¼šæ„å»ºé¡¹ç›®ï¼ŒASå·¥å…·åˆ›å»ºé¡¹ç›®ï¼Œæœ¬è´¨ä¸Šæ‰§è¡Œçš„å°±æ˜¯è¿™æ¡å‘½ä»¤ã€‚

02.gradle -q a b cï¼šæ‰§è¡Œä»»åŠ¡aï¼Œbï¼Œcï¼Œè¾“å‡ºå†…å®¹
    -q,-quietï¼šåªè¾“å‡ºéœ€è¦çš„å†…å®¹ï¼›å¯å‰å¯å

03.gradle -q a b c -x b æ‰§è¡Œæ—¶æ’é™¤bï¼Œ
    -xï¼šæ’é™¤ä»»åŠ¡ï¼›å¤šç”¨äºå¤šä»»åŠ¡è”åŠ¨æ—¶ï¼Œæ’é™¤æŒ‡å®šä»»åŠ¡ï¼Œä½†æ­¤ä»»åŠ¡çš„ä¾èµ–ä¼šç…§å¸¸æ‰§è¡Œã€‚

04.gradle -vï¼šæŸ¥è¯¢ç‰ˆæœ¬å·

05.gradle cleanï¼šåˆ é™¤ build ç›®å½•ä»¥åŠæ‰€æœ‰æ„å»ºå®Œæˆçš„æ–‡ä»¶

06.gradle check ç¼–è¯‘å¹¶æµ‹è¯•ä»£ç ã€‚ä¸€äº›å…¶ä»–æ’ä»¶ä¹Ÿå¯èƒ½ä¼šå¢å¼ºè¿™ä¸ªä»»åŠ¡çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé‡‡ç”¨äº† Code-quality æ’ä»¶ï¼Œè¿™ä¸ªä»»åŠ¡ä¼šé¢å¤–æ‰§è¡Œ Checkstyleã€‚

07.gradle build ç¼–è¯‘å¹¶æ‰“åŒ…jaræ–‡ä»¶ï¼Œä½†ä¸ä¼šæ‰§è¡Œå•å…ƒæµ‹è¯•ã€‚ä¸€äº›å…¶ä»–æ’ä»¶å¯èƒ½ä¼šå¢å¼ºè¿™ä¸ªä»»åŠ¡çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé‡‡ç”¨äº†Waræ’ä»¶ï¼Œè¿™ä¸ªä»»åŠ¡ä¾¿ä¼šä¸ºä½ çš„é¡¹ç›®æ‰“å‡ºWaråŒ…ã€‚

08.æ‰“åŒ…å‘½ä»¤ assemble
gradle assembleï¼šç¼–è¯‘å¹¶æ‰“Debugå’ŒReleaseåŒ…
gradle assembleDebugï¼šç¼–è¯‘å¹¶æŠŠæœ¬é¡¹ç›®ä¸‹æ‰€æœ‰æ¨¡å—æ‰€æœ‰æ¸ é“çš„Debugç‰ˆæœ¬æ‰“åŒ…
gradle assembleRelease ç¼–è¯‘å¹¶æŠŠæœ¬é¡¹ç›®ä¸‹æ‰€æœ‰æ¨¡å—æ‰€æœ‰æ¸ é“çš„Releaseç‰ˆæœ¬æ‰“åŒ…
gradle assembleæ¸ é“åï¼šç”Ÿæˆæ¸ é“åçš„Debugå’ŒReleaseç‰ˆæœ¬
gradle assembleæ¸ é“åReleaseï¼šæ¸ é“releaseç‰ˆæœ¬
gradle assembleæ¸ é“åRelease -p appï¼šæ‰“åŒ…appå·¥ç¨‹ä¸‹æ¸ é“åçš„releaseç‰ˆæœ¬ï¼ˆ-p å†³å®šæ‰§è¡Œå“ªä¸ªï¼‰
gradle installReleaseï¼šæ‰“åŒ…Releaseç‰ˆæœ¬å¹¶å®‰è£…
gradle uninstallReleaseï¼šå¸è½½Releaseç‰ˆæœ¬åŒ…

09.-i,--infoï¼šåœ¨é»˜è®¤è®¾ç½®ä¸­ï¼ŒGradleæ„å»ºä¸ä¼šæä¾›å¤§é‡çš„è¾“å‡ºä¿¡æ¯ã€‚é€šè¿‡è¿™ä¸ªé€‰é¡¹å¯ä»¥å°†Gradleçš„æ—¥å¿—çº§åˆ«æ”¹å˜åˆ°INFOä»¥è·å¾—æ›´å¤šä¿¡æ¯ã€‚å¦‚æœä½ æƒ³è¦çŸ¥é“æ„å»ºä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè¿™ä¸ªé€‰é¡¹éå¸¸æœ‰ç”¨ã€‚

10.-s,--stacktraceï¼šå¦‚æœæ„å»ºåœ¨è¿è¡Œä¸­å‡ºç°é”™è¯¯ï¼Œä½ ä¼šæƒ³è¦çŸ¥é“é”™è¯¯æ˜¯ä»å“ªé‡Œå¼€å§‹çš„ã€‚-sé€‰é¡¹åœ¨æœ‰å¼‚å¸¸æŠ›å‡ºæ—¶ä¼šæ‰“å°å‡ºç®€çŸ­çš„å †æ ˆè·Ÿè¸ªä¿¡æ¯ï¼Œå¸®åŠ©ä½ è¿›è¡Œè°ƒåº¦ã€‚

11.å…¶ä»–å‘½ä»¤
gradle projects æ˜¾ç¤ºæ‰€æœ‰ module ï¼Œä»¥åŠè¯´æ˜ï¼ˆè®¾ç½®äº† description æ‰æ˜¾ç¤ºï¼‰
gradle tasks (--all) æ˜¾ç¤ºæ‰€æœ‰å¯æ‰§è¡Œçš„ä»»åŠ¡
gradle tasks|less åˆ†é¡µæ˜¾ç¤ºå¯æ‰§è¡Œçš„ä»»åŠ¡ä¿¡æ¯
gradle model æ˜¾ç¤ºå®šä¹‰çš„æ‰€æœ‰ä»»åŠ¡
gradle app:properties|less æ˜¾ç¤ºappçš„æ‰€æœ‰å±æ€§ï¼Œå¹¶åˆ†é¡µ
gradle androidDependencies æŸ¥çœ‹æ‰€æœ‰çš„ä¾èµ–åŒ…
gradle app:Dependencies æŸ¥çœ‹appçš„ä¾èµ–å…³ç³»

12.å‘½ä»¤è¡Œå¢åŠ å±æ€§
gradle -q -P commandLineProjectProp=Pæ·»åŠ çš„å±æ€§ -D org.gradle.project.systemProjectProp=DåŠ¨æ€å®šä¹‰ç³»ç»Ÿå±æ€§ printPropers
-Pï¼šå¢åŠ æ–°çš„å±æ€§ï¼›key=value çš„å½¢å¼ã€‚
-Dï¼šå¢åŠ æ–°çš„ç³»ç»Ÿå±æ€§ï¼Œéœ€è¦æŒ‡å®šç³»ç»Ÿä½ç½®ï¼šå†™æ³•ï¼šorg.gradle.project. key=value

å‚è€ƒä»»åŠ¡ printPropers
gradle.properties å†…å®šä¹‰çš„å±æ€§ï¼š

gradlePropertiesProp=è‡ªå®šä¹‰çš„å±æ€§
systemProjectProp=é€šè¿‡å‘½ä»¤ -D ä¿®æ”¹å±æ€§
envProjectProp=æœªé€šè¿‡ systemPro.xx æ·»åŠ çš„å±æ€§ï¼Œä¸èƒ½é€šè¿‡ System.properties è·å–
systemProp.system=é€šè¿‡ systemPro.xx æ·»åŠ çš„å±æ€§ä¼šè¢«æ·»åŠ åˆ°ç³»ç»Ÿå±æ€§é‡Œï¼Œä¸”åªæœ‰æ ¹ç›®å½•çš„ gradle.properties å¯ä»¥ï¼Œé¡¹ç›®å†…çš„ gradle.properties ä¸å¯ä»¥ï¼Œå¯ä»¥é€šè¿‡sSyetem.properties['key']è·å–

13.å…¶ä»–
1ï¼‰--continueï¼šæœ‰é”™è¯¯ä¹Ÿä¼šç»§ç»­æ‰§è¡Œã€‚
2ï¼‰--recompile-scripts ï¼šæŠ›å¼ƒå·²æœ‰çš„ .gradle ç¼“å­˜ï¼Œé‡æ–°æ„å»º
3)-bï¼šæŒ‡å®šæ„å»ºæ–‡ä»¶çš„è·¯å¾„ï¼ˆå•ä¸ªæ–‡ä»¶ï¼‰;ç°åœ¨å·²ç»ä¸èƒ½æŒ‡å®šï¼Œéœ€è¦ä¸ setting.gradle å…³è”
gradle -q -b app/build.gradle projectInfo
-pï¼šæŒ‡å®šæ„å»ºç›®å½•çš„è·¯å¾„ï¼ˆç›®å½•ä¸­æœ‰å¤šä¸ªæ„å»ºæ–‡ä»¶æ—¶ï¼‰ï¼Œ
4ï¼‰æ·»åŠ ç³»ç»Ÿå±æ€§ï¼ˆæ²¡æˆåŠŸï¼‰
systemProperties 'property': 'æ·»åŠ ç³»ç»Ÿå±æ€§'



ç¬¬å››ç«  gradle ä¾èµ–é…ç½®
subprojects {}
allprojects {}//model çš„ dependencies ä½¿ç”¨
android{}//å¯¹åº”çš„æ˜¯ APPExtension æ’ä»¶
é…ç½®æœ¬åœ°æœåŠ¡å™¨ç¼“å­˜ä»“åº“
nexus
artifactory
01.ext {//åœ¨æ­¤è®¾ç½®éœ€è¦çš„å‚æ•°,ä¹Ÿå¯ä»¥æ”¾åœ¨buildscriptä¸­
    KOLINT_VERSION = '1.5.21'
}
ext.STOREFILE = 'sky.jks'
ext.STOREPASSWORD = '1qaz2wsx'

02.buildscript {//æ„å»ºé¡¹ç›®ä½¿ç”¨ã€‚android{}ä¸­çš„é…ç½®ä½¿ç”¨
01ï¼‰é…ç½®é¡¹ç›®çš„åŸºç¡€ä»“åº“
repositories {
    google()
    mavenCentral()//mavenä¸­å¤®ä»“åº“
    //é˜¿é‡Œäº‘çš„ maven åœ°å€
    //isAllowInsecureProtocol=true //gradleä¼šé»˜è®¤ç¦ç”¨éå®˜æ–¹çš„ä»“åº“ï¼Œå¦‚éœ€ä½¿ç”¨ï¼Œéœ€è¦å…ˆå£°æ˜ã€‚
    maven { url 'https://maven.aliyun.com/repository/public' }
    maven { url 'https://maven.aliyun.com/repository/google' }
    maven { url 'https://maven.aliyun.com/repository/central' }
    //é˜¿é‡Œäº‘çš„ maven åœ°å€

    //maven{ url uri("åœ°å€")} //è‡ªå®šä¹‰çš„æœ¬åœ°ä»“åº“
}
02ï¼‰åŸºäºæ•´ä¸ªé¡¹ç›®çš„ç¯å¢ƒé…ç½®
dependencies {
    classpath 'com.android.tools.build:gradle:7.0.3'
    classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:1.5.21"
    //classpath 'com.tencent.mm:AndResGuard-gradle-plugin:1.2.21'//resguard åŠ å¯†æ‰“åŒ…å·¥å…·
}
03ï¼‰å…¶ä»–å‚æ•°é…ç½®
configurations {//å…¨å±€æ’é™¤æŒ‡å®šæ¨¡å—
    all*.exclude group: 'com.google.code.gson', module: 'gson'
}

configurations.all {//å…¨å±€æ’é™¤æŒ‡å®šæ¨¡å—
      exclude group: 'com.google.code.gson', module: 'gson'
  }
}

03.task clean(type: Delete) {//Deleteç±»çš„æ´¾ç”Ÿä»»åŠ¡
    delete rootProject.buildDir
}
description = "é¡¹ç›®çš„æ ¹ç›®å½•"

04.å‘å¸ƒåˆ°maven ä»“åº“
apply plugin: 'maven-publish'
uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: "file://localhost/tmp/myRepo/")
            repository(url:"æœ¬åœ°æˆ–è¿œç¨‹åœ°å€")
        }
    }
}
uploadArchives {
    repositories {
        ivy {
            credentials {
                username "username"
                password "pw"
            }
            url "http://repo.mycompany.com"
        }
    }
}



ç¬¬äº”ç«  Android çš„ gradle é…ç½®
01.plugins æ¨¡å—åˆ’åˆ†
1ï¼‰id 'com.android.application'ï¼šä¸»æ¨¡å—
2ï¼‰id 'com.android.library'ï¼šjaråŒ…æ¨¡å—
3ï¼‰id 'kotlin-android' ï¼šAndroidç‰ˆæœ¬kotlinæ”¯æŒ
4ï¼‰id 'kotlin-android-extensions' ï¼škotlin view æ³¨å…¥æ¨¡å—
id 'kotlin-parcelize'
5ï¼‰id 'java-library'ï¼šJavaçš„libæ¨¡å¼
6ï¼‰id 'kotlin'ï¼šJavaæ¨¡å¼çš„kotlin
6ï¼‰id 'maven-public'ï¼š å‘å¸ƒåˆ°mavenä»“åº“
id 'maven' æ–°ç‰ˆå·²ç»åºŸå¼ƒ

02.å¼•å…¥å…¶ä»–gradleé…ç½®æ–‡ä»¶
apply from: "$rootDir/common.gradle"

02.dependencies å…·ä½“ä¾èµ–çš„jar é…ç½®ï¼Œéµå¾ª group:name:version
implementation group: 'androidx.core', name: 'core-ktx', version: '1.3.2'

1ï¼‰implementationï¼šè®¿é—®éš”ç¦»ï¼Œåªåœ¨æ­¤moduleä¸­ä¾èµ–ï¼Œç¼–è¯‘æœŸï¼Œæ¯ä¸ªmoduleä½¿ç”¨è‡ªå·±ç‹¬æœ‰çš„jarï¼Œä½†æ‰“åŒ…æ—¶ï¼Œä¼šæŠŠæ¯ä¸ª module é‡å¤çš„jar é€‰å–æœ€æ–°ç‰ˆæœ¬æ‰“åŒ…åˆ°apkä¸­ã€‚
å¯ä»¥æŒ‡å®šå•ç‹¬çš„ä¾èµ–ç¯å¢ƒ
debugImplementationï¼šåªåœ¨ debug æ¨¡å¼ä¸‹ä½¿ç”¨
testImplementationï¼šåªåœ¨ testæ¨¡å¼ä¸‹ä½¿ç”¨
releaseImplementationï¼šåªåœ¨ release æ¨¡å¼ä¸‹ä½¿ç”¨
2ï¼‰apiï¼šä¾èµ–å¯ç»§æ‰¿ï¼Œç›¸å½“äºåŸæ¥çš„compile
debugApiï¼šåªåœ¨ debug æ¨¡å¼ä¸‹ä½¿ç”¨
testApiï¼šåªåœ¨ testæ¨¡å¼ä¸‹ä½¿ç”¨
releaseApiï¼šåªåœ¨ release æ¨¡å¼ä¸‹ä½¿ç”¨
3ï¼‰compileOnlyï¼šç¼–è¯‘æœŸä½¿ç”¨ï¼Œä¸æ‰“åŒ…åˆ°apkä¸­ã€‚
4ï¼‰runtimeOnlyï¼šä¸å‚ä¸ç¼–è¯‘ï¼Œæ‰“åŒ…åˆ°apkä¸­ã€‚

03.exclude ï¼šæ’é™¤æŒ‡å®šæ¨¡å—ï¼Œ
æ ¼å¼ï¼šexclude gropu:'group',module:'name'
1ï¼‰å¼•å…¥æ—¶æ’é™¤
implementation('com.squareup.retrofit2:converter-gson:3.14.7'){
exclude group:'com.google.code.gson',module:'gson'
}
2ï¼‰å…¨å±€å±è”½
configurations.all {
exclude group:'com.google.code.gson',module:'gson'
}
æˆ–
configurations{
all*.exclude group:'com.google.code.gson',module:'gson'
}

03.dependencies è®¾ç½®ä¾èµ–çš„jar
01ï¼‰å¼•ç”¨ libs æ–‡ä»¶å¤¹é‡Œæ‰€æœ‰çš„ jaråŒ…ä¸ aaråŒ…
implementation fileTree(dir: 'libs', include: ['*.jar','*.aar'])
02ï¼‰å¼•ç”¨æŒ‡å®šçš„jar
implementation files("path/xx.jar","path/xx.jar")
03ï¼‰å¼•ç”¨æŒ‡å®šçš„aar
implementation (name:'apiutils',ext:'aar')
04ï¼‰exclude é™¤å»æ­¤ jar å†…éƒ¨å¼•ç”¨çš„ jar
implementation("com.squareup.retrofit2:converter-gson:$RETROFIT_VERSION") {
  ï¼‰ exclude group: 'com.google.code.gson', module: 'gson'
}ï¼‰
05ï¼‰å¼•ç”¨é¡¹ç›®å†…çš„ jar æ¨¡å—
implementation project(':common')
06ï¼‰å¼•ç”¨è¿œç¨‹ä»“åº“å†…çš„ jarï¼Œéµå¾ª group:artifactId:version
androidx.core:core-ktx:1.3.2
androidx.appcompat:appcompat:1.2.0
com.google.android.material:material:1.3.0

org.greenrobot:eventbus:3.2.0
com.google.code.gson:gson:2.8.7

    //navigation å·¥å…·jar
androidx.navigation:navigation-fragment-ktx:2.1.0
androidx.navigation:navigation-ui-ktx:2.1.0
    //navigation å·¥å…·jar

    //refresh å·¥å…·jar
com.scwang.smartrefresh:SmartRefreshLayout:1.1.0-alpha-7
com.scwang.smartrefresh:SmartRefreshHeader:1.1.0-alpha-7'//æ²¡æœ‰ä½¿ç”¨ç‰¹æ®ŠHeaderï¼Œå¯ä»¥ä¸åŠ è¿™è¡Œ
androidx.swiperefreshlayout:swiperefreshlayout:1.0.0
    //refresh å·¥å…·jar

04.è·å–è‡ªå®šä¹‰æ–‡ä»¶ä¸­çš„å±æ€§
def key = new Properties()// key:value çš„å½¢å¼
1ï¼‰å·²å…³è”çš„ xx.properties ä¸­çš„å‚æ•° ä»¥åŠ xx.gradle çš„ ext ä¸­çš„å‚æ•°ï¼Œåªè¦ä¸ä¸é»˜è®¤å‚æ•°é‡åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ä¹Ÿå¯ä»¥é€šè¿‡æ–‡ä»¶è°ƒç”¨ã€‚
gradle.properties å†…çš„å±æ€§ä¼˜å…ˆçº§é«˜ä¸build.gradle
def keyPass = rootProject.file("gradle.properties")
key.load(new FileInputStream(keyPass))

2ï¼‰è‡ªå®šä¹‰æ–‡ä»¶ä¸­çš„å‚æ•°å¿…é¡»è½½å…¥æ‰èƒ½è·å–
def textkey = rootProject.file("text.txt")
key.load(new FileInputStream(textkey))

05.compileSdk targetSdk minSdk çš„åŒºåˆ«
compileSdk ä»£è¡¨ç€ç¼–è¯‘çš„æ—¶å€™ï¼Œä¼šé‡‡ç”¨è¯¥apiçš„è§„èŒƒè¿›è¡Œä»£ç æ£€æŸ¥å’Œè­¦å‘Šï¼Œä½†æ˜¯å¹¶ä¸ä¼šç¼–è¯‘è¿›apkä¸­ã€‚
targetSdk ä»£è¡¨ç€ç›®æ ‡ç‰ˆæœ¬ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šå°†è¯¥ç‰ˆæœ¬çš„apiç¼–è¯‘è¿›apkä¸­ã€‚
minSdk ä»£è¡¨ç€æœ€ä½ç‰ˆæœ¬ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™å…¼å®¹åˆ°è¯¥å‚æ•°æŒ‡å®šæœ€ä½ç‰ˆæœ¬apiã€‚

minSDK xx --  targetSDK xxï¼šå…¼å®¹ä»xxåˆ°xxä¹‹é—´æ‰€æœ‰apiçš„å˜åŒ–ï¼›
ä¸‰è€…å…³ç³»ï¼šminsdk <= TargetSdk <= compileSdk;
ç†æƒ³å…³ç³»ï¼šminsdk <= TargetSdk == compileSdkï¼Œç›®æ ‡ä¸ä¾èµ–ç›¸åŒ

06.defaultConfig å‚æ•°çš„æ„æ€
1ï¼‰applicationId "com.sky.xs"
2ï¼‰minSdk 21           //é€‚é…çš„æœ€ä½ç‰ˆæœ¬
3ï¼‰targetSdk 31        //ç›®æ ‡ç‰ˆæœ¬ï¼Œæ‰“åŒ…æ—¶çš„æœ€é«˜ç‰ˆæœ¬
4ï¼‰versionCode 1       //ç‰ˆæœ¬å·
5ï¼‰versionName "1.0"   //ç‰ˆæœ¬å
6ï¼‰multiDexEnabled true//æ·»åŠ åˆ†åŒ…æ”¯æŒï¼Œçªç ´65535çš„é™åˆ¶
7ï¼‰vectorDrawables.useSupportLibrary = true //åº“æ”¯æŒçŸ¢é‡å›¾
8ï¼‰flavorDimensions "sky" //æ¸ é“å·
9ï¼‰manifestPlaceholders = [CHANNEL_VALUE: "umeng"]//é»˜è®¤æ˜¯umengçš„æ¸ é“
10ï¼‰ndk {
    //æ·»åŠ å¯¹åº”cpuç±»å‹çš„.soåº“ã€‚
    abiFilters 'armeabi-v7a', 'armeabi-v8a', 'armeabi', 'x86'
}

07.signingConfigs ç­¾åæ–‡ä»¶é…ç½®
storeFile file("$rootDir/${STOREFILE}")
storePassword STOREPASSWORD
keyAlias KEYALIAS
keyPassword KEYPASSWORD

08.buildTypes æ‰“åŒ…æ–¹å¼é…ç½®
minifyEnabled true//å¼€å¯ç³»ç»Ÿæ··æ·†
zipAlignEnabled true //Zipalignä¼˜åŒ–
versionNameSuffix "-release"
signingConfig signingConfigs.release
shrinkResources true// ç§»é™¤æ— ç”¨çš„resourceæ–‡ä»¶
proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
createName()ï¼šè‡ªå®šä¹‰æ–¹æ³•

09.MVVMæ¨¡å¼é…ç½®
buildFeatures {
    dataBinding = true
    viewBinding true
}

dataBinding å¯ä»¥è‡ªå®šä¹‰ binding çš„ç±»åï¼ŒviewBinding ä¸è¡Œã€‚
dataBinding å¯ä»¥å°†View å’Œç•Œé¢ä¸Šçš„æ•°æ®è¿›è¡ŒåŒå‘ç»‘å®šï¼ŒviewBinding ä¸è¡Œã€‚


10.è®¾ç½®å¯¹åº”çš„Javaç‰ˆæœ¬
compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
}

11.kotlinçš„Javaç‰ˆæœ¬é…ç½®
kotlinOptions {
    jvmTarget = '11'
}

12.é€šé“é…ç½®ï¼Œåº”ç”¨å¸‚åœºæˆ–è€…ä¸»åœ°å€é…ç½®
//    flavorDimensions "sky"
    productFlavors {
        sky {//æ­é…ä¸‹æ–¹çš„ productFlavors.all ä½¿ç”¨
            dimension "sky"
        }
//        baidu{
//            manifestPlaceholders = [CHANNEL_VALUE: baidu]
//        }
        te {
            buildConfigField 'String', 'API_URL', '"https://xxx/"'
            buildConfigField 'String', 'APK_SUFFIX', '"SKYP"'
        }
    }
    productFlavors.all { flavor -> flavor.manifestPlaceholders = [CHANNEL_VALUE: name] }

13.sourceSets æºç è·¯å¾„ï¼ˆèµ„æºç›®å½•ï¼‰è®¾ç½®ï¼Œé€šå¸¸éƒ½æ˜¯è€é¡¹ç›®è½¬ASæ‰ä¼šç”¨åˆ°
1ï¼‰manifest.srcFileï¼šmanifestæ–‡ä»¶è·¯å¾„
src/main/AndroidManifest.xml
2ï¼‰java.srcDirsï¼šJavaæ–‡ä»¶è·¯å¾„
src/main/java
3ï¼‰res.srcDirsï¼šandroidèµ„æºæ–‡ä»¶è·¯å¾„
src/main/res
4ï¼‰assets.srcDirs
src/main/assets
5ï¼‰jniLibs.srcDirs
src/main/jniLibs

6ï¼‰src/test/java ï¼šæµ‹è¯•èµ„æºæ–‡ä»¶
7ï¼‰resources.srcDirsï¼šjava èµ„æºæ–‡ä»¶è·¯å¾„
src/main/resources
8ï¼‰aidl.srcDirsï¼šaidlçš„è·¯å¾„
src/main/aidl
9ï¼‰renderscript.srcDirs
src/main/rs
10ï¼‰androidTest.setRoot('tests')
11ï¼‰debug.setRoot('build-types/debug')
12ï¼‰release.setRoot('build-types/release')

14.æ‰§è¡Œlintæ£€æŸ¥ï¼Œæœ‰ä»»ä½•çš„é”™è¯¯æˆ–è€…è­¦å‘Šæç¤ºï¼Œéƒ½ä¼šç»ˆæ­¢æ„å»ºï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶å…³æ‰ã€‚
lintOptions {
    abortOnError false
    checkReleaseBuilds false
    // é˜²æ­¢åœ¨å‘å¸ƒçš„æ—¶å€™å‡ºç°å› MissingTranslationå¯¼è‡´Build Failed!
    disable 'MissingTranslation'
}
15.å£°æ˜é…ç½®ï¼Œæ²¡ç”¨è¿‡
packagingOptions {
    exclude 'META-INF/NOTICE.txt' // will not include NOTICE file
    exclude 'META-INF/LICENSE.txt' // will not include LICENSE file
}

def createName() {
    android.applicationVariants.all { variant ->
        variant.outputs.all {
            if (variant.buildType.name == "debug")
                outputFileName = "${variant.baseName}-${variant.versionName}.apk"
            else
                outputFileName = "${variant.baseName}-${variant.versionName}-${buildTime()}.apk"
        }
    }
}



ç¬¬å…­ç«  gradle æ–‡ä»¶ï¼ŒåŸºäº Project å¯¹è±¡å†…çš„æ–¹æ³•
01.file(obj)æ–¹æ³•ï¼šå¯ä»¥æ¥æ”¶ä»»ä½•å¯¹è±¡ï¼Œé€šå¸¸éƒ½ä¼šæ˜¯ String æˆ– fileå¯¹è±¡ï¼Œä¼šè½¬æ¢ä¸ºä¸€ä¸ªç»å¯¹è·¯å¾„çš„ File å¯¹è±¡ã€‚
å¯ä»¥è¯†åˆ«URLï¼šfile:/xxx/xxx.txt

02.æ–‡ä»¶é›†åˆï¼šfiles(obj...)ï¼šFileCollection æ¥å£ï¼Œè¡¨ç¤ºæ–‡ä»¶çš„é›†åˆ
FileCollection collection = files('src/file1.txt', new File('src/file2.txt'), ['src/file3.txt', 'src/file4.txt'])

1ï¼‰ä¸€ä¸ªæ–‡ä»¶é›†åˆæ˜¯å¯è¿­ä»£çš„ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ as æ“ä½œç¬¦è½¬æ¢ä¸ºå…¶ä»–ç±»å‹çš„å¯¹è±¡é›†åˆã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨+è¿ç®—ç¬¦æŠŠä¸¤ä¸ªæ–‡ä»¶é›†åˆç›¸åŠ ï¼Œæˆ–ä½¿ç”¨-è¿ç®—ç¬¦å‡å»ä¸€ä¸ªæ–‡ä»¶é›†åˆã€‚è¿™é‡Œæ˜¯ä¸€äº›ä½¿ç”¨æ–‡ä»¶é›†åˆçš„ä¾‹å­ã€‚
collection.each {File file ->
    println file.name
}
2ï¼‰implementation files("xx/xx.jar","xx/xx.jar")//files()æ–¹æ³•çš„ä½¿ç”¨


2ï¼‰def collection = files { srcDir.listFiles() }
ç›¸å½“äº Java æˆå‘˜å˜é‡ï¼Œé—­åŒ…æ˜¯æ–¹æ³•ï¼Œåªæœ‰åœ¨æˆå‘˜å˜é‡è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œã€‚

03.æ–‡ä»¶æ ‘ğŸŒ²ï¼šfileTree(dir)ï¼šFileTree æ¥å£ï¼Œç»§æ‰¿è‡ª FileCollection
æ–‡ä»¶æ•°å¯ä»¥è¡¨ç¤ºä¸€ä¸ªç›®å½•æ ‘ æˆ– ZIP æ–‡ä»¶çš„å†…å®¹ã€‚
gradle ä¸­å‡ ä¸ªå¯¹è±¡éƒ½å®ç°äº† FileTree æ¥å£ï¼Œå¦‚ sourceSets

04.å‹ç¼©æ–‡ä»¶çš„æ–‡ä»¶æ ‘ï¼šzipTree(),tarTree(),åŒæ ·ä¼šè¿”å›ä¸€ä¸ª FileTree
zip,tar,jar,war,ear,aar

1ï¼‰FileTree zip = zipTree('someFile.zip')
2ï¼‰FileTree tar = tarTree('someFile.tar')
3ï¼‰FileTree someTar = tarTree(resources.gzip('someTar.ext'))

05.æŒ‡å®šä¸€ç»„è¾“å…¥æ–‡ä»¶ï¼Œå¯ä»¥ç”¨file(),files(),fileTree(),zipTree(),tarTree();

06.æ–‡ä»¶å¤åˆ¶ Copy ï¼Œç»§æ‰¿è‡ª CopySpec æ¥å£ï¼ŒProject ç±»ä¹Ÿè‡ªå¸¦ copy æ–¹æ³•ã€‚
01ï¼‰from æºæ–‡ä»¶ï¼ŒåŒæ–‡ä»¶ç±»æ–¹æ³•ä¸€æ ·ï¼Œæ¥æ”¶ä»»ä½•å‚æ•°ï¼Œå¯ä»¥æ˜¯æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯ç›®å½•ï¼Œå¯ä»¥æ˜¯ä¸ªä»»åŠ¡
02ï¼‰into æ¥æ”¶ç›®å½•ï¼Œ
03ï¼‰include åŒ…å«å“ªäº›æ–‡ä»¶
04ï¼‰exclude æ’é™¤å“ªäº›æ–‡ä»¶
05ï¼‰rename(æ–°åå­—,æ—§åå­—) é‡å‘½å

07.Sync åŒæ­¥ï¼Œç»§æ‰¿è‡ªCopy
08.Zip å‹ç¼©ï¼Œç»§æ‰¿è‡ª Copy
æ‰“åŒ…åçš„zip æ–‡ä»¶åœ¨ build/distributions ä¸‹ï¼Œåç§°æ˜¯ é¡¹ç›®å.zip(project.name.zip)å†…éƒ¨æ˜¯ç›®å½•ç»“æ„
01ï¼‰from éœ€è¦å‹ç¼©çš„æºæ–‡ä»¶ï¼Œ
02ï¼‰into å‹ç¼©åçš„ç›®æ ‡ç›®å½•ï¼Œ

03ï¼‰archiveBaseNameï¼šåŸºæœ¬åç§°ï¼Œä¸è®¾ç½®ï¼Œåç§°å°±æ˜¯ project.name.zip
baseName å·²å¼ƒç”¨ï¼Œ
04ï¼‰archiveAppendixï¼šåç¼€
05ï¼‰archiveVersionï¼šç‰ˆæœ¬ï¼Œä¸è®¾ç½®å°±æ˜¯ project.version
06ï¼‰archiveClassifierï¼šåˆä¸€ä¸ªåç¼€
07ï¼‰archiveExtensionï¼šæ‰©å±•åç§°

08ï¼‰distsDirNameï¼šæ–‡ä»¶è·¯å¾„ï¼Œä¾èµ–äºå½’æ¡£ç±»å‹ã€‚JARåŒ…å’Œ WARåŒ…ä¼šç”Ÿæˆåˆ° project.buildDir/librariesä¸­ã€‚ZIPæ–‡ä»¶å’Œ TARæ–‡ä»¶ä¼šç”Ÿæˆåˆ°project.buildDir/distributionsä¸­ã€‚
è‡ªå®šä¹‰çš„è·¯å¾„ä¹Ÿæ˜¯åœ¨ buildDir æ–‡ä»¶å¤¹ä¹‹ä¸‹
09ï¼‰archiveFileNameï¼šæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ä»¥åŠåç§°ï¼Œä¼˜å…ˆçº§æœ€é«˜
10ï¼‰archiveFileï¼šä¸çŸ¥é“

ç¬¬ä¸ƒç«  gradle.properties å±æ€§é…ç½®
01.org.gradle.daemon
å½“è®¾ç½®ä¸º true æ—¶ï¼ŒGradle å®ˆæŠ¤è¿›ç¨‹ä¼šè¿è¡Œæ„å»ºã€‚å¯¹äºæœ¬åœ°å¼€å‘è€…çš„æ„å»ºè€Œè¨€ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€å–œæ¬¢çš„å±æ€§ã€‚å¼€å‘äººå‘˜çš„ç¯å¢ƒåœ¨é€Ÿåº¦å’Œåé¦ˆä¸Šä¼šä¼˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å‡ ä¹æ€»æ˜¯ä½¿ç”¨å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ Gradle ä½œä¸šã€‚ç”±äº CI ç¯å¢ƒåœ¨ä¸€è‡´æ€§å’Œå¯é æ€§ä¸Šçš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬ä¸é€šè¿‡å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ CI æ„å»ºï¼ˆå³é•¿æ—¶é—´è¿è¡Œè¿›ç¨‹ï¼‰ã€‚

02.org.gradle.java.home ä¸º Gradle æ„å»ºè¿›ç¨‹æŒ‡å®š java home ç›®å½•ã€‚
è¿™ä¸ªå€¼å¯ä»¥è®¾ç½®ä¸º jdk æˆ– jre çš„ä½ç½®ï¼Œä¸è¿‡ï¼Œæ ¹æ®ä½ çš„æ„å»ºæ‰€åšçš„ï¼Œé€‰æ‹© jdk ä¼šæ›´å®‰å…¨ã€‚å¦‚æœè¯¥è®¾ç½®æœªæŒ‡å®šï¼Œå°†ä½¿ç”¨åˆç†çš„é»˜è®¤å€¼ã€‚
#org.gradle.java.home=/Applications/Android Studio.app/Contents/jre/Contents/Home
#org.gradle.java.home=/Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home

03.org.gradle.jvmargs æŒ‡å®šç”¨äºè¯¥å®ˆæŠ¤è¿›ç¨‹çš„ jvmargsã€‚è¯¥è®¾ç½®å¯¹è°ƒæ•´å†…å­˜è®¾ç½®ç‰¹åˆ«æœ‰ç”¨ã€‚ç›®å‰çš„å†…å­˜ä¸Šçš„é»˜è®¤è®¾ç½®å¾ˆå¤§æ–¹ã€‚
org.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8

04.org.gradle.configureondemand
å¯ç”¨æ–°çš„å­µåŒ–æ¨¡å¼ï¼Œå¯ä»¥åœ¨é…ç½®é¡¹ç›®æ—¶ä½¿å¾— Gradle å…·æœ‰é€‰æ‹©æ€§ã€‚åªé€‚ç”¨äºç›¸å…³çš„é¡¹ç›®è¢«é…ç½®ä¸ºåœ¨å¤§å‹å¤šé¡¹ç›®ä¸­æ›´å¿«åœ°æ„å»ºã€‚

05.org.gradle.parallel
å¦‚æœé…ç½®äº†è¿™ä¸€ä¸ªï¼ŒGradle å°†åœ¨å­µåŒ–çš„å¹¶è¡Œæ¨¡å¼ä¸‹è¿è¡Œã€‚

06.é€šè¿‡ systemProp.https é…ç½® HTTPS ä»£ç†æœåŠ¡å™¨
systemProp.https.proxyHost=www.somehost.org
systemProp.https.proxyPort=8080
systemProp.https.proxyUser=userid
systemProp.https.proxyPassword=password
systemProp.https.nonProxyHosts=*.nonproxyrepos.com|localhost
#é€šè¿‡ systemProp.https é…ç½® HTTPS ä»£ç†æœåŠ¡å™¨
NTLM èº«ä»½éªŒè¯
#å¦‚æœæ‚¨çš„ä»£ç†æœåŠ¡å™¨éœ€è¦ NTLM èº«ä»½éªŒè¯ï¼Œæ‚¨å¯èƒ½éœ€è¦æä¾›éªŒè¯åŸŸï¼Œä»¥åŠç”¨æˆ·åå’Œå¯†ç ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å‘ NTLM ä»£ç†æä¾›éªŒè¯åŸŸï¼š
#
#å°† http.proxyUser ç³»ç»Ÿå±æ€§è®¾ç½®ä¸ºä¸€ä¸ªè¿™æ ·çš„å€¼ï¼šåŸŸ/ç”¨æˆ·åã€‚
#é€šè¿‡ http.auth.ntlm.domain ç³»ç»Ÿå±æ€§æä¾›éªŒè¯åŸŸã€‚

07.android.useAndroidX=true
#Android æ’ä»¶ä¼šä½¿ç”¨å¯¹åº”çš„ AndroidX åº“è€Œéæ”¯æŒåº“ã€‚

08.android.enableJetifier=true
Android æ’ä»¶ä¼šé€šè¿‡é‡å†™ç°æœ‰ç¬¬ä¸‰æ–¹åº“çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè‡ªåŠ¨å°†è¿™äº›åº“è¿ç§»ä¸ºä½¿ç”¨ AndroidXã€‚
æ³¨æ„ enableJetifier æ ‡å¿—å¯èƒ½ä¼šå¯¼è‡´æ„å»ºæ—¶é—´å˜é•¿ï¼Œé™¤éæœ‰å¿…è¦ï¼Œå¦åˆ™ä¸åº”ä½¿ç”¨å®ƒä»¬ã€‚
å¦‚æœæ‚¨çš„é¡¹ç›®å·²æœ‰ enableJetifier æ ‡å¿—ä¸”å·²å¼€å¯ï¼Œæ‚¨å¯ä»¥è¿è¡Œ Build Analyzer çš„ Jetifier æ£€æŸ¥ï¼Œç¡®è®¤æ˜¯å¦ç¡®å®éœ€è¦è¯¥åŠŸèƒ½ã€‚Build Analyzer æ£€æŸ¥ä» Android Studio Chipmunk å¼€å§‹æä¾›ã€‚


ç¬¬å…«ç«  gradle è°ƒç”¨ Ant
build.xml æ–‡ä»¶
<project>
    <!--    1.æµ‹è¯•å®ä¾‹ï¼Œä»¥åŠä¾èµ–å®ä¾‹-->
    <target name="antHello1" depends="antHello3">
        <echo>antHello1 ä¾èµ–äº antHello3</echo>
    </target>
    <!--    2.gradle ä¸­è®¾ç½®å±æ€§å€¼ï¼Œant ä¸­é€šè¿‡ä»»åŠ¡ä¾èµ–è·å–å±æ€§å€¼-->
    <target name="antHello4" depends="printAnt">
        <echo>customDir = ${customDir}</echo>
    </target>
    <!--    3.è‡ªå®šä¹‰å±æ€§ï¼Œåœ¨ gradle è·å–-->
    <property name="antProp" value="a property defined in an Ant build" />

    <!--    4.Antä¸­è®¾ç½®å¼•ç”¨IDï¼Œåœ¨ gradle è®¾ç½®å…·ä½“å‚æ•° -->
    <path refid="classpath" />
    <!--    5.è®¾ç½®å¼•ç”¨ï¼Œåœ¨ gradle  ä¸­è·å–-->
    <path id="antPath" location="libs" />

</project>
ant.importBuild 'ant/build.xml'

01.è°ƒç”¨ant
task antHello {
    doLast {
        def greeting = "hello from Ant"
        ant.echo(message: greeting)
    }
}
02.gradle ä»»åŠ¡ä¾èµ–äº ant ä»»åŠ¡
task antHello2(dependsOn: antHello1) {
    doLast {
        println "antHello2 ä¾èµ– antHello1 "
    }
}
03.antä¸­ä»»åŠ¡ä¾èµ–äº gradle ä¸­çš„ä»»åŠ¡
task antHello3 {
    doLast {
        println "antHello3 è¢« antHello1 ä¾èµ–"
    }
}

04.gradle ä¸­è®¾ç½®è‡ªå®šä¹‰å±æ€§, ant é€šè¿‡ä»»åŠ¡ä¾èµ–è·å–å±æ€§ã€‚
task printAnt {
    doLast {
//        è®¾ç½®è‡ªå®šä¹‰å±æ€§çš„æ–¹å¼
        ant.customDir = buildDir
        ant.properties.customDir = buildDir
        ant.properties['customDir'] = buildDir
        ant.property(name: 'customDir', location: buildDir)
        println ant.customDir
        println ant.properties.customDir
        println ant.properties['customDir']
    }
}

05.gradle è·å– ant ä¸­çš„è‡ªå®šä¹‰å±æ€§
task printAnt2 {
    doLast {
        println ant.antProp
        println ant.properties.antProp
        println ant.properties['antProp']
    }
}

06.ant è®¾ç½®è‡ªå®šä¹‰å¼•ç”¨åï¼Œgradle è®¾ç½®å…·ä½“å‚æ•°
task printAnt3 {
    doLast {
//        è®¾ç½®è‡ªå®šä¹‰å¼•ç”¨çš„æ–¹å¼
        ant.path(id: 'classpath', location: 'libs')
        ant.references.classpath = ant.path(location: 'libs')
        ant.references['classpath'] = ant.path(location: 'libs')
        println ant.references.classpath
        println ant.references['classpath']
    }
}

07.gradle è·å– ant ä¸­çš„å¼•ç”¨
task printAnt4 {
    doLast {
        println ant.references.antPath
        println ant.references['antPath']
    }
}

08.å¯ä»¥åˆ©ç”¨ AntBuilder æ‰§è¡Œ and.loadfile



ç¬¬ä¹ç«  gradle æ³¨æ„äº‹é¡¹
01.javaè¿è¡Œå¤±è´¥åœ¨.idea/gradle çš„GradleProjectSettingsä¸‹åŠ å…¥
<option name="delegatedBuild" value="false" />

02.gradle æ˜¯ç³»ç»Ÿç¯å¢ƒå˜é‡é‡Œé…ç½®çš„gradle
./gradlew æ˜¯é¡¹ç›®è‡ªèº«é…ç½®çš„gradle
å¦‚æœç‰ˆæœ¬ä¸€æ ·å°±æ²¡æœ‰åŒºåˆ«ã€‚

03.gradlew é”™è¯¯
zsh: permission denied: ./gradlew
è¿è¡Œ chmod +x gradlew

04.MAC ä¸‹åˆ é™¤Androidå¼€å‘ç¼“å­˜
1ï¼‰AndroidStudioæ‰€åœ¨ç›®å½•ï¼šrm -rf /Applications/Android\ Studio.app
SDKæ‰€åœ¨ç›®å½•ï¼šrm -rf ~/Library/Android/sdk
æˆ–è€…ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼šrm -rf ~/Library/Android*

2ï¼‰AndroidStudioçš„ç¼“å­˜ï¼Œ~æ˜¯æ ¹ç›®å½•ï¼š/Users/sky
rm -rf ~/Library/Application\ Support/Google/AndroidStudio*
rm -rf ~/Library/Caches/Google/AndroidStudio*
rm -rf ~/Library/Logs/Google/AndroidStudio*
rm -rf ~/Library/Preferences/com.google.android.studio.plist
rm -rf ~/Library/Preferences/AndroidStudio*ï¼ˆæ— ï¼‰

3ï¼‰åˆ é™¤gradleå…³è”æ–‡ä»¶ (caches & wrapper)
rm -rf ~/.gradle

4ï¼‰åˆ é™¤æ¨¡æ‹Ÿå™¨
rm -rf ~/.android

ç¬¬åç« ï¼šä¸€äº›æ–‡ä»¶çš„é…ç½®å±æ€§
01.gradle-wrapper.properties æ–‡ä»¶é‡Œçš„å±æ€§é…ç½®
distributionBaseï¼šä¸‹è½½çš„Gradleå‹ç¼©åŒ…è§£å‹åå­˜å‚¨çš„ä¸»ç›®å½•
distributionPathï¼šç›¸å¯¹äºdistributionBaseçš„è§£å‹ç¼©åçš„Gradleå‹ç¼©åŒ…çš„è·¯å¾„
zipStoreBaseï¼šåŒdistributionBaseï¼Œåªä¸è¿‡æ˜¯å­˜æ”¾zipå‹ç¼©åŒ…çš„
zipStorePathï¼šåŒdistributionPathï¼Œåªä¸è¿‡æ˜¯å­˜æ”¾zipå‹ç¼©åŒ…çš„
distributionUrlï¼šGradleå‘è¡Œç‰ˆå‹ç¼©åŒ…çš„ä¸‹è½½åœ°å€

02.buildscript ä¸­çš„ repositories å’Œ allprojects çš„ repositories çš„ä½œç”¨å’ŒåŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
1ï¼‰buildscript é‡Œæ˜¯gradleè„šæœ¬æ‰§è¡Œæ‰€éœ€ä¾èµ–ï¼Œåˆ†åˆ«æ˜¯å¯¹åº”çš„ maven åº“å’Œæ’ä»¶
2ï¼‰allprojects é‡Œæ˜¯é¡¹ç›®æœ¬èº«éœ€è¦çš„ä¾èµ–ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨è¦ä¾èµ–æˆ‘è‡ªå·±mavenåº“çš„toastutilsåº“ï¼Œé‚£ä¹ˆæˆ‘åº”è¯¥å°†maven {url 'https://dl.bintray.com/calvinning/maven'}å†™åœ¨è¿™é‡Œï¼Œè€Œä¸æ˜¯buildscriptä¸­ï¼Œä¸ç„¶æ‰¾ä¸åˆ°ã€‚
pluginManagement {
    repositories {
        google()
        mavenCentral()
        gradlePluginPortal()
    }
}
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
    }
}
rootProject.name = "My"
include ':app'
